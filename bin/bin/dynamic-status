#!/bin/bash

OUT=""
SPACE="  "


DYNAMIC_STATUS_CONTROL_VALUE="0"
DYNAMIC_STATUS_CONTROL_FILE="${DOTFILES_DIR}/content/DYNAMIC_STATUS_CONTROL"
if [ -f "$DYNAMIC_STATUS_CONTROL_FILE" ]; then
  DYNAMIC_STATUS_CONTROL_VALUE=`cat ${DYNAMIC_STATUS_CONTROL_FILE}`;
fi

# TODO: 4 is hardcoded
DYNAMIC_STATUS_CONTROL_VALUE=$((${DYNAMIC_STATUS_CONTROL_VALUE} % 4));

NODE_VERSION=`node --version | nth -c 1-50`
NVIM_VERSION=`nvim --version | nth -c 6-50 0`
GIT_VERSION=`git --version | nth -c 12-50`

NODE_OUTPUT=node${NODE_VERSION}
NVIM_OUTPUT=nvim${NVIM_VERSION}
GIT_OUTPUT=git${GIT_VERSION}

if [ "$DYNAMIC_STATUS_CONTROL_VALUE" -eq 0 ]; then
  OUT="${OUT}${NODE_OUTPUT}${SPACE}"
  OUT="${OUT}${NVIM_OUTPUT}${SPACE}"
  OUT="${OUT}${GIT_OUTPUT}${SPACE}"
elif [ "$DYNAMIC_STATUS_CONTROL_VALUE" -eq 1 ]; then
  OUT=$NODE_OUTPUT
elif [ "$DYNAMIC_STATUS_CONTROL_VALUE" -eq 2 ]; then
  OUT=$NVIM_OUTPUT
elif [ "$DYNAMIC_STATUS_CONTROL_VALUE" -eq 3 ]; then
  OUT=$GIT_OUTPUT
fi

echo $OUT

